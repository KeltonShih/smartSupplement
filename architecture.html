<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartSupplement Architecture Documentation</title>
    <style>
        :root {
            /* ä¸»è‰²è°ƒ - Teal é’è‰²ç³» */
            --primary-color: #14b8a6;
            --primary-dark: #0d9488;
            --primary-light: #5eead4;
            
            /* èƒŒæ™¯è‰² */
            --bg-main: #f8fafc;
            --bg-sidebar: #1e293b;
            --bg-sidebar-dark: #0f172a;
            --bg-content: #ffffff;
            
            /* æ–‡å­—è‰² */
            --text-main: #1e293b;
            --text-light: #64748b;
            --text-white: #f8fafc;
            
            /* å¼ºè°ƒè‰² */
            --accent-color: #f59e0b;
            --accent-dark: #d97706;
            
            /* è¾¹æ¡†å’Œåˆ†éš”çº¿ */
            --border-color: #e2e8f0;
            --divider-color: #cbd5e1;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            background: var(--bg-main);
            display: flex;
            min-height: 100vh;
        }
        
        /* Left Sidebar - TOC */
        #toc-sidebar {
            width: 300px;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            background: var(--bg-sidebar);
            color: var(--text-white);
            padding: 2rem;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        #toc-sidebar h2 {
            color: var(--text-white);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        
        /* Search Box Styles */
        #search-box {
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        #search-input {
            width: 100%;
            padding: 0.75rem;
            padding-right: 2.5rem;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            background: var(--bg-sidebar-dark);
            color: var(--text-white);
            font-size: 0.9em;
            outline: none;
            transition: all 0.2s;
        }
        
        #search-input::placeholder {
            color: var(--text-light);
        }
        
        #search-input:focus {
            background: var(--bg-sidebar);
            border-color: var(--primary-light);
            box-shadow: 0 0 10px rgba(20, 184, 166, 0.3);
        }
        
        #clear-btn {
            position: absolute;
            right: 0.5rem;
            top: 0.65rem;
            background: transparent;
            border: none;
            color: var(--text-light);
            font-size: 1.2em;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            transition: color 0.2s;
        }
        
        #clear-btn:hover {
            color: #ef4444;
        }
        
        #result-count {
            margin-top: 0.5rem;
            font-size: 0.85em;
            color: var(--primary-light);
            text-align: center;
        }
        
        /* Search Highlight */
        .search-highlight {
            background: var(--accent-color);
            color: var(--text-main);
            padding: 0.1rem 0.2rem;
            border-radius: 2px;
            font-weight: 600;
        }
        
        .toc {
            list-style: none;
            padding-left: 0;
        }
        
        .toc li {
            margin: 0.5rem 0;
        }
        
        .toc a {
            color: var(--primary-light);
            text-decoration: none;
            transition: all 0.2s;
            display: block;
            padding: 0.3rem 0.5rem;
            border-radius: 4px;
        }
        
        .toc a:hover {
            background: rgba(20, 184, 166, 0.1);
            color: var(--primary-color);
            padding-left: 1rem;
        }
        
        .toc ul {
            list-style: none;
            padding-left: 1rem;
        }
        
        .toc ul li {
            margin: 0.3rem 0;
        }
        
        .toc ul a {
            font-size: 0.9em;
            color: #94a3b8;
        }
        
        /* Right Content Area */
        #content-area {
            margin-left: 300px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        /* Sticky Header */
        #content-header {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-color) 100%);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            margin: 0;
        }
        
        #content-header h1 {
            margin: 0;
            font-size: 2rem;
            color: white;
            border: none;
            padding: 0;
            font-weight: 700;
        }
        
        #main-content {
            background: var(--bg-content);
            padding: 2rem;
            margin: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex: 1;
        }
        
        /* Back to top button */
        #back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            text-decoration: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: background 0.2s;
            z-index: 1000;
        }
        
        #back-to-top:hover {
            background: var(--primary-dark);
        }
        
        h1, h2, h3, h4, h5 {
            color: var(--text-main);
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        /* Hide first h1 in content since it's in the header */
        #main-content > h1:first-child {
            display: none;
        }
        
        h1 {
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }
        
        h2 {
            border-bottom: 2px solid var(--divider-color);
            padding-bottom: 0.3rem;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 1rem 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        th, td {
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            text-align: left;
        }
        
        th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background-color: #f8fafc;
        }
        
        tr:hover {
            background-color: #f1f5f9;
        }
        
        code {
            background: #f1f5f9;
            color: #e11d48;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: var(--bg-sidebar);
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
            margin: 1rem 0;
            border-left: 4px solid var(--primary-color);
        }
        
        pre code {
            background: transparent;
            color: inherit;
        }
        
        .mermaid {
            background: #fafafa;
            padding: 1rem;
            border-radius: 5px;
            margin: 1rem 0;
            border: 1px solid var(--border-color);
        }
        
        hr {
            border: none;
            border-top: 2px solid var(--border-color);
            margin: 2rem 0;
        }
        
        a {
            color: var(--primary-color);
        }
        
        a:hover {
            color: var(--primary-dark);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            #toc-sidebar {
                width: 250px;
            }
            
            #content-area {
                margin-left: 250px;
            }
            
            #main-content {
                margin: 1rem;
                padding: 1rem;
            }
        }
        
        /* Scrollbar styling for TOC */
        #toc-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        
        #toc-sidebar::-webkit-scrollbar-track {
            background: var(--bg-sidebar-dark);
        }
        
        #toc-sidebar::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        #toc-sidebar::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
        // Search functionality
        function searchContent() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const content = document.getElementById('main-content');
            const resultCount = document.getElementById('result-count');
            
            // Remove previous highlights
            const highlighted = content.querySelectorAll('.search-highlight');
            highlighted.forEach(el => {
                const parent = el.parentNode;
                parent.replaceChild(document.createTextNode(el.textContent), el);
                parent.normalize();
            });
            
            if (!searchTerm) {
                resultCount.textContent = '';
                return;
            }
            
            // Highlight matching text
            let count = 0;
            const walker = document.createTreeWalker(
                content,
                NodeFilter.SHOW_TEXT,
                { acceptNode: node => {
                    // Skip script and style elements
                    if (node.parentElement.tagName === 'SCRIPT' || 
                        node.parentElement.tagName === 'STYLE') {
                        return NodeFilter.FILTER_REJECT;
                    }
                    return NodeFilter.FILTER_ACCEPT;
                } }
            );
            
            const nodesToReplace = [];
            while (walker.nextNode()) {
                const node = walker.currentNode;
                if (node.textContent.toLowerCase().includes(searchTerm)) {
                    nodesToReplace.push(node);
                }
            }
            
            nodesToReplace.forEach(node => {
                const text = node.textContent;
                const lowerText = text.toLowerCase();
                let lastIndex = 0;
                const fragment = document.createDocumentFragment();
                
                let index = lowerText.indexOf(searchTerm, lastIndex);
                while (index !== -1) {
                    // Add text before match
                    if (index > lastIndex) {
                        fragment.appendChild(document.createTextNode(text.substring(lastIndex, index)));
                    }
                    
                    // Add highlighted match
                    const mark = document.createElement('mark');
                    mark.className = 'search-highlight';
                    mark.textContent = text.substring(index, index + searchTerm.length);
                    fragment.appendChild(mark);
                    count++;
                    
                    lastIndex = index + searchTerm.length;
                    index = lowerText.indexOf(searchTerm, lastIndex);
                }
                
                // Add remaining text
                if (lastIndex < text.length) {
                    fragment.appendChild(document.createTextNode(text.substring(lastIndex)));
                }
                
                node.parentNode.replaceChild(fragment, node);
            });
            
            resultCount.textContent = count > 0 ? `æ‰¾åˆ° ${count} å€‹çµæœ` : 'æœªæ‰¾åˆ°çµæœ';
            
            // Scroll to first result
            if (count > 0) {
                const firstHighlight = content.querySelector('.search-highlight');
                if (firstHighlight) {
                    firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        }
        
        // Clear search
        function clearSearch() {
            document.getElementById('search-input').value = '';
            searchContent();
        }
    </script>
</head>
<body>
    <!-- Left Sidebar - Table of Contents -->
    <aside id="toc-sidebar">
        <div id="search-box">
            <input type="text" id="search-input" placeholder="ğŸ” æœå°‹æ–‡ä»¶å…§å®¹..." onkeyup="searchContent()">
            <button id="clear-btn" onclick="clearSearch()">âœ•</button>
            <div id="result-count"></div>
        </div>
        <h2>ğŸ“‘ ç›®éŒ„ç´¢å¼•</h2>
        <div class="toc">
<ul>
<li><a href="#_1">ğŸ“ æ•´é«”æ¶æ§‹æ¦‚è¦½</a><ul>
<li><a href="#_2">æ¶æ§‹æ¨¡å¼</a></li>
</ul>
</li>
<li><a href="#_3">ğŸ—ºï¸ æ¶æ§‹å¿ƒæ™ºåœ–</a></li>
<li><a href="#_4">ğŸ“¦ æ¨¡çµ„æ¶æ§‹åœ–</a></li>
<li><a href="#_5">ğŸ“‹ æ¨¡çµ„è©³ç´°èªªæ˜</a><ul>
<li><a href="#1-maindart">1ï¸âƒ£ æ‡‰ç”¨å…¥å£ï¼ˆmain.dartï¼‰</a></li>
<li><a href="#2-models">2ï¸âƒ£ è³‡æ–™æ¨¡å‹å±¤ï¼ˆmodels/ï¼‰</a></li>
<li><a href="#3-pages">3ï¸âƒ£ é é¢å±¤ï¼ˆpages/ï¼‰</a></li>
<li><a href="#4-providers">4ï¸âƒ£ ç‹€æ…‹ç®¡ç†å±¤ï¼ˆproviders/ï¼‰</a></li>
<li><a href="#5-services">5ï¸âƒ£ æœå‹™å±¤ï¼ˆservices/ï¼‰</a></li>
</ul>
</li>
<li><a href="#_40">ğŸ”„ è³‡æ–™æµå‘åœ–</a></li>
<li><a href="#_41">ğŸ“Š é—œéµæ¥­å‹™æµç¨‹</a><ul>
<li><a href="#_42">æ–°å¢ä¿å¥é£Ÿå“æµç¨‹</a></li>
<li><a href="#_43">æ™ºæ…§æ¡è³¼æµç¨‹</a></li>
</ul>
</li>
<li><a href="#_44">ğŸ¯ æ ¸å¿ƒæŠ€è¡“ç‰¹é»</a><ul>
<li><a href="#1">1. å‹•æ…‹åº«å­˜ç®¡ç†</a></li>
<li><a href="#2">2. æ™ºæ…§è£œè²¨ç³»çµ±</a></li>
<li><a href="#3">3. æœ¬åœ°è³‡æ–™æŒä¹…åŒ–</a></li>
<li><a href="#4">4. ç‹€æ…‹ç®¡ç†</a></li>
<li><a href="#5">5. é€šçŸ¥ç³»çµ±</a></li>
</ul>
</li>
<li><a href="#_45">ğŸ“± æ”¯æ´å¹³å°</a></li>
<li><a href="#_46">ğŸ“š ä¾è³´å¥—ä»¶</a><ul>
<li><a href="#_47">æ ¸å¿ƒä¾è³´</a></li>
<li><a href="#_48">é–‹ç™¼ä¾è³´</a></li>
</ul>
</li>
<li><a href="#_49">ğŸ” è³‡æ–™åº«çµæ§‹</a><ul>
<li><a href="#hive-box">Hive Box</a></li>
<li><a href="#supplement-schema">Supplement Schema</a></li>
</ul>
</li>
<li><a href="#_50">ğŸ’¡ è¨­è¨ˆäº®é»</a></li>
<li><a href="#uiux">ğŸ¨ UI/UX è¨­è¨ˆåŸå‰‡</a></li>
<li><a href="#_51">ğŸ“Œ ç‰ˆæœ¬è³‡è¨Š</a></li>
</ul>
</div>

    </aside>
    
    <!-- Right Content Area -->
    <div id="content-area">
        <header id="content-header">
            <h1>ğŸ“š SmartSupplement æ‡‰ç”¨ç¨‹å¼æ¶æ§‹æ–‡æª”</h1>
        </header>
        <div id="main-content">
            <h1 id="smartsupplement">SmartSupplement æ‡‰ç”¨ç¨‹å¼æ¶æ§‹æ–‡æª”</h1>
<h2 id="_1">ğŸ“ æ•´é«”æ¶æ§‹æ¦‚è¦½</h2>
<p>SmartSupplement æ˜¯ä¸€å€‹åŸºæ–¼ <strong>Flutter</strong> æ¡†æ¶é–‹ç™¼çš„æ™ºæ…§ä¿å¥é£Ÿå“åº«å­˜ç®¡ç†ç³»çµ±ï¼Œæ¡ç”¨ <strong>Provider</strong> ç‹€æ…‹ç®¡ç†æ¨¡å¼ï¼Œä½¿ç”¨ <strong>Hive</strong> ä½œç‚ºæœ¬åœ°è³‡æ–™åº«ã€‚</p>
<h3 id="_2">æ¶æ§‹æ¨¡å¼</h3>
<p>æ¡ç”¨ <strong>MVC + Provider</strong> æ··åˆæ¶æ§‹ï¼š
- <strong>Model</strong>: è³‡æ–™æ¨¡å‹å±¤ï¼ˆ<code>models/</code>ï¼‰
- <strong>View</strong>: UI è¦–åœ–å±¤ï¼ˆ<code>pages/</code>ï¼‰
- <strong>Controller/Provider</strong>: æ¥­å‹™é‚è¼¯èˆ‡ç‹€æ…‹ç®¡ç†ï¼ˆ<code>providers/</code>ï¼‰
- <strong>Services</strong>: å¤–éƒ¨æœå‹™å±¤ï¼ˆ<code>services/</code>ï¼‰</p>
<hr />
<h2 id="_3">ğŸ—ºï¸ æ¶æ§‹å¿ƒæ™ºåœ–</h2>
<pre><div class="mermaid">graph TB
    Main[main.dart&lt;br/&gt;æ‡‰ç”¨å…¥å£] --&gt; App[MyApp]

    App --&gt; Pages[é é¢å±¤ Pages]
    App --&gt; Providers[ç‹€æ…‹ç®¡ç† Providers]
    App --&gt; Services[æœå‹™å±¤ Services]

    Pages --&gt; Dashboard[&quot;DashboardPage&lt;br/&gt;å„€è¡¨æ¿ä¸»é &quot;]
    Pages --&gt; Detail[&quot;DetailPage&lt;br/&gt;ç”¢å“è©³æƒ…&quot;]
    Pages --&gt; Shopping[&quot;ShoppingListPage&lt;br/&gt;æ™ºæ…§æ¡è³¼æ¸…å–®&quot;]
    Pages --&gt; SmartAdd[&quot;SmartAddPage&lt;br/&gt;æ™ºæ…§æ–°å¢&quot;]

    Providers --&gt; SupProvider[&quot;SupplementProvider&lt;br/&gt;ä¿å¥é£Ÿå“ç‹€æ…‹ç®¡ç†&quot;]
    Providers --&gt; ShopProvider[&quot;ShoppingListProvider&lt;br/&gt;æ¡è³¼æ¸…å–®ç‹€æ…‹ç®¡ç†&quot;]

    Services --&gt; NotifService[&quot;NotificationService&lt;br/&gt;é€šçŸ¥æœå‹™&quot;]

    Models[è³‡æ–™æ¨¡å‹ Models] --&gt; Supplement[&quot;Supplement&lt;br/&gt;ä¿å¥é£Ÿå“æ¨¡å‹&quot;]

    SupProvider --&gt; Hive[(Hive Database&lt;br/&gt;æœ¬åœ°è³‡æ–™åº«)]
    SupProvider --&gt; Models
    ShopProvider --&gt; SupProvider
    ShopProvider --&gt; Models

    Dashboard --&gt; SupProvider
    Detail --&gt; SupProvider
    Shopping --&gt; ShopProvider
    SmartAdd --&gt; SupProvider

    Main --&gt; NotifService
    Dashboard --&gt; NotifService

    style Main fill:#e1f5ff
    style Models fill:#fff4e1
    style Pages fill:#e8f5e9
    style Providers fill:#f3e5f5
    style Services fill:#ffe4e1
</div></pre>
<hr />
<h2 id="_4">ğŸ“¦ æ¨¡çµ„æ¶æ§‹åœ–</h2>
<pre><div class="mermaid">graph LR
    subgraph UI[&quot;UI å±¤ï¼ˆç”¨æˆ¶ç•Œé¢ï¼‰&quot;]
        D[DashboardPage]
        DT[DetailPage]
        S[ShoppingListPage]
        A[SmartAddPage]
    end

    subgraph Logic[&quot;é‚è¼¯å±¤ï¼ˆç‹€æ…‹ç®¡ç†ï¼‰&quot;]
        SP[SupplementProvider]
        SLP[ShoppingListProvider]
    end

    subgraph Data[&quot;è³‡æ–™å±¤ï¼ˆæ¨¡å‹ + å„²å­˜ï¼‰&quot;]
        M[Supplement Model]
        H[(Hive DB)]
    end

    subgraph External[&quot;å¤–éƒ¨æœå‹™&quot;]
        N[NotificationService]
    end

    D --&gt; SP
    DT --&gt; SP
    S --&gt; SLP
    A --&gt; SP

    SLP --&gt; SP
    SP --&gt; M
    SP --&gt; H

    D --&gt; N

    style UI fill:#e8f5e9
    style Logic fill:#f3e5f5
    style Data fill:#fff4e1
    style External fill:#ffe4e1
</div></pre>
<hr />
<h2 id="_5">ğŸ“‹ æ¨¡çµ„è©³ç´°èªªæ˜</h2>
<h3 id="1-maindart">1ï¸âƒ£ æ‡‰ç”¨å…¥å£ï¼ˆmain.dartï¼‰</h3>
<h4 id="_6">åŠŸèƒ½æ¦‚è¿°</h4>
<p>æ‡‰ç”¨ç¨‹å¼çš„å•Ÿå‹•å…¥å£ï¼Œè² è²¬åˆå§‹åŒ–ç³»çµ±å’Œé…ç½®å…¨åŸŸè¨­å®šã€‚</p>
<h4 id="_7">æ ¸å¿ƒå‡½æ•¸</h4>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>main()</code></td>
<td>æ‡‰ç”¨å…¥å£é»ï¼Œåˆå§‹åŒ– Flutterã€Hive è³‡æ–™åº«ã€é€šçŸ¥æœå‹™</td>
</tr>
<tr>
<td><code>MyApp.build()</code></td>
<td>æ§‹å»ºæ‡‰ç”¨æ ¹ Widgetï¼Œé…ç½® Providerã€ä¸»é¡Œã€è·¯ç”±</td>
</tr>
</tbody>
</table>
<h4 id="_8">ä¸»è¦è·è²¬</h4>
<ul>
<li>åˆå§‹åŒ– Hive è³‡æ–™åº«</li>
<li>è¨»å†Š <code>SupplementAdapter</code></li>
<li>åˆå§‹åŒ–é€šçŸ¥æœå‹™</li>
<li>é…ç½® <code>MultiProvider</code>ï¼ˆç‹€æ…‹ç®¡ç†ï¼‰</li>
<li>è¨­å®šæ‡‰ç”¨ä¸»é¡Œï¼ˆäº®è‰²/æš—è‰²æ¨¡å¼ï¼‰</li>
<li>é…ç½®è·¯ç”±ç³»çµ±</li>
</ul>
<hr />
<h3 id="2-models">2ï¸âƒ£ è³‡æ–™æ¨¡å‹å±¤ï¼ˆmodels/ï¼‰</h3>
<h4 id="supplementdart-">ğŸ“„ <code>supplement.dart</code> - ä¿å¥é£Ÿå“è³‡æ–™æ¨¡å‹</h4>
<h5 id="_9">åŠŸèƒ½æ¦‚è¿°</h5>
<p>å®šç¾©ä¿å¥é£Ÿå“çš„è³‡æ–™çµæ§‹å’Œæ ¸å¿ƒæ¥­å‹™é‚è¼¯ï¼ŒåŒ…å«å‹•æ…‹åº«å­˜è¨ˆç®—ã€è£œè²¨åˆ¤æ–·ã€æ‰¹æ¬¡æ¡è³¼ç­‰åŠŸèƒ½ã€‚</p>
<h5 id="_10">è³‡æ–™æ¬„ä½</h5>
<table>
<thead>
<tr>
<th>æ¬„ä½</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>String</td>
<td>å”¯ä¸€è­˜åˆ¥ç¢¼ï¼ˆUUIDï¼‰</td>
</tr>
<tr>
<td><code>barcode</code></td>
<td>String?</td>
<td>ç”¢å“æ¢ç¢¼ï¼ˆé¸å¡«ï¼‰</td>
</tr>
<tr>
<td><code>name</code></td>
<td>String</td>
<td>ç”¢å“åç¨±</td>
</tr>
<tr>
<td><code>brand</code></td>
<td>String</td>
<td>å“ç‰Œåç¨±</td>
</tr>
<tr>
<td><code>imagePath</code></td>
<td>String</td>
<td>åœ–ç‰‡è·¯å¾‘ï¼ˆç¶²è·¯ URLï¼‰</td>
</tr>
<tr>
<td><code>quantityPerBottle</code></td>
<td>int</td>
<td>æ¯ç“¶é¡†æ•¸</td>
</tr>
<tr>
<td><code>dailyDosage</code></td>
<td>int</td>
<td>æ¯æ—¥å»ºè­°ç”¨é‡ï¼ˆé¡†ï¼‰</td>
</tr>
<tr>
<td><code>currentStock</code></td>
<td>int</td>
<td>ç›®å‰åº«å­˜ï¼ˆé¡†æ•¸ï¼‰</td>
</tr>
<tr>
<td><code>leadTime</code></td>
<td>int</td>
<td>å‚™è²¨å¤©æ•¸ï¼ˆé è¨­ 3 å¤©ï¼‰</td>
</tr>
<tr>
<td><code>lastUpdated</code></td>
<td>DateTime</td>
<td>æœ€å¾Œæ›´æ–°æ™‚é–“</td>
</tr>
<tr>
<td><code>localImagePath</code></td>
<td>String?</td>
<td>æœ¬åœ°åœ–ç‰‡è·¯å¾‘</td>
</tr>
</tbody>
</table>
<h5 id="_11">æ ¸å¿ƒå‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>å›å‚³å€¼</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>estimatedCurrentStock</code></td>
<td>int</td>
<td>æ ¹æ“šæœ€å¾Œæ›´æ–°æ™‚é–“å‹•æ…‹è¨ˆç®—ç›®å‰é ä¼°åº«å­˜</td>
</tr>
<tr>
<td><code>remainingDays</code></td>
<td>int</td>
<td>è¨ˆç®—åº«å­˜é‚„èƒ½ä½¿ç”¨å¹¾å¤©</td>
</tr>
<tr>
<td><code>shouldReorder</code></td>
<td>bool</td>
<td>åˆ¤æ–·æ˜¯å¦æ‡‰è©²è£œè²¨</td>
</tr>
<tr>
<td><code>statusEmoji</code></td>
<td>String</td>
<td>å–å¾—ç‹€æ…‹è¡¨æƒ…ç¬¦è™Ÿï¼ˆğŸ”´/ğŸŸ /ğŸŸ¢ï¼‰</td>
</tr>
<tr>
<td><code>statusText</code></td>
<td>String</td>
<td>å–å¾—ç‹€æ…‹æ–‡å­—ï¼ˆæ–·è²¨é¢¨éšª/å»ºè­°è£œè²¨/åº«å­˜å……è¶³ï¼‰</td>
</tr>
<tr>
<td><code>calculateBottlesToBuy(days)</code></td>
<td>int</td>
<td>è¨ˆç®—æŒ‡å®šé€±æœŸéœ€è¦è³¼è²·çš„ç“¶æ•¸</td>
</tr>
<tr>
<td><code>quickRestock()</code></td>
<td>void</td>
<td>å¿«é€Ÿè£œè²¨ï¼ˆå¢åŠ ä¸€ç“¶ï¼‰</td>
</tr>
<tr>
<td><code>adjustStock(newStock)</code></td>
<td>void</td>
<td>æ‰‹å‹•èª¿æ•´åº«å­˜</td>
</tr>
<tr>
<td><code>completePurchase(bottles)</code></td>
<td>void</td>
<td>æ‰¹æ¬¡æ¡è³¼å®Œæˆï¼Œæ›´æ–°åº«å­˜</td>
</tr>
<tr>
<td><code>copyWith(...)</code></td>
<td>Supplement</td>
<td>å‰µå»ºå‰¯æœ¬ï¼ˆç”¨æ–¼ç·¨è¼¯ï¼‰</td>
</tr>
</tbody>
</table>
<h5 id="_12">æ¥­å‹™é‚è¼¯</h5>
<p><strong>å‹•æ…‹åº«å­˜è¨ˆç®—å…¬å¼</strong>ï¼š</p>
<pre><code>é ä¼°åº«å­˜ = ç›®å‰åº«å­˜ - (ç¶“éå¤©æ•¸ Ã— æ¯æ—¥åŠ‘é‡)
</code></pre>
<p><strong>è£œè²¨åˆ¤æ–·æ¢ä»¶</strong>ï¼š</p>
<pre><code>æ‡‰è©²è£œè²¨ = å‰©é¤˜å¤©æ•¸ â‰¤ å‚™è²¨å¤©æ•¸ + 2
</code></pre>
<p><strong>æ‰¹æ¬¡æ¡è³¼è¨ˆç®—</strong>ï¼š</p>
<pre><code>ç›®æ¨™åº«å­˜ = (æ¡è³¼é€±æœŸ + å‚™è²¨å¤©æ•¸) Ã— æ¯æ—¥åŠ‘é‡
ç¼ºå£ = ç›®æ¨™åº«å­˜ - é ä¼°åº«å­˜
éœ€è³¼è²·ç“¶æ•¸ = âŒˆç¼ºå£ Ã· æ¯ç“¶é¡†æ•¸âŒ‰
</code></pre>
<hr />
<h3 id="3-pages">3ï¸âƒ£ é é¢å±¤ï¼ˆpages/ï¼‰</h3>
<h4 id="dashboard_pagedart-">ğŸ“± <code>dashboard_page.dart</code> - å„€è¡¨æ¿ä¸»é </h4>
<h5 id="_13">åŠŸèƒ½æ¦‚è¿°</h5>
<p>æ‡‰ç”¨çš„ä¸»é é¢ï¼Œé¡¯ç¤ºæ‰€æœ‰ä¿å¥é£Ÿå“çš„åº«å­˜ç‹€æ…‹ï¼Œæ”¯æ´æ’åºã€æŸ¥çœ‹è©³æƒ…ã€å¿«é€Ÿè£œè²¨ç­‰åŠŸèƒ½ã€‚</p>
<h5 id="_14">æ ¸å¿ƒé¡åˆ¥</h5>
<table>
<thead>
<tr>
<th>é¡åˆ¥</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DashboardPage</code></td>
<td>ä¸»å„€è¡¨æ¿ Widget</td>
</tr>
<tr>
<td><code>_DashboardPageState</code></td>
<td>å„€è¡¨æ¿ç‹€æ…‹ç®¡ç†</td>
</tr>
<tr>
<td><code>_SupplementCard</code></td>
<td>ä¿å¥é£Ÿå“å¡ç‰‡ Widget</td>
</tr>
</tbody>
</table>
<h5 id="_15">ä¸»è¦å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initState()</code></td>
<td>åˆå§‹åŒ–æ™‚æ’ç¨‹é€šçŸ¥</td>
</tr>
<tr>
<td><code>_scheduleNotifications()</code></td>
<td>è¨­å®šæ¯æ—¥å’Œæ¯æœˆæé†’é€šçŸ¥</td>
</tr>
<tr>
<td><code>build()</code></td>
<td>æ§‹å»º UIï¼ŒåŒ…å« AppBarã€æ¸…å–®ã€FAB</td>
</tr>
</tbody>
</table>
<h5 id="ui">UI çµ„ä»¶</h5>
<ul>
<li><strong>AppBar</strong>ï¼šæ¨™é¡Œã€é—œæ–¼æŒ‰éˆ•ã€æ¡è³¼æ¸…å–®æŒ‰éˆ•ã€æ’åºé¸å–®</li>
<li><strong>ç©ºç‹€æ…‹æç¤º</strong>ï¼šç„¡ç”¢å“æ™‚é¡¯ç¤ºæç¤ºè¨Šæ¯</li>
<li><strong>RefreshIndicator</strong>ï¼šä¸‹æ‹‰åˆ·æ–°</li>
<li><strong>ListView</strong>ï¼šä¿å¥é£Ÿå“å¡ç‰‡åˆ—è¡¨</li>
<li><strong>FloatingActionButton</strong>ï¼šæ–°å¢ç”¢å“æŒ‰éˆ•</li>
</ul>
<h5 id="_supplementcard"><code>_SupplementCard</code> åŠŸèƒ½</h5>
<ul>
<li>é¡¯ç¤ºç”¢å“åœ–ç‰‡ï¼ˆå„ªå…ˆè¼‰å…¥æœ¬åœ°åœ–ç‰‡ï¼‰</li>
<li>é¡¯ç¤ºç”¢å“åç¨±ã€å“ç‰Œ</li>
<li>é¡¯ç¤ºåº«å­˜ç‹€æ…‹ï¼ˆé¡†æ•¸ã€å‰©é¤˜å¤©æ•¸ï¼‰</li>
<li>ç‹€æ…‹æŒ‡ç¤ºå™¨ï¼ˆè¡¨æƒ…ç¬¦è™Ÿ + é¡è‰²ï¼‰</li>
<li>å¿«é€Ÿè£œè²¨æŒ‰éˆ•</li>
</ul>
<hr />
<h4 id="detail_pagedart-">ğŸ“ <code>detail_page.dart</code> - ç”¢å“è©³æƒ…é </h4>
<h5 id="_16">åŠŸèƒ½æ¦‚è¿°</h5>
<p>é¡¯ç¤ºå’Œç·¨è¼¯å–®ä¸€ä¿å¥é£Ÿå“çš„è©³ç´°è³‡è¨Šï¼Œæ”¯æ´åœ–ç‰‡ä¸Šå‚³ã€è³‡æ–™ä¿®æ”¹ã€åº«å­˜èª¿æ•´ã€ç”¢å“åˆªé™¤ã€‚</p>
<h5 id="_17">ç‹€æ…‹ç®¡ç†</h5>
<table>
<thead>
<tr>
<th>ç‹€æ…‹è®Šæ•¸</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_isEditing</code></td>
<td>bool</td>
<td>æ˜¯å¦åœ¨ç·¨è¼¯æ¨¡å¼</td>
</tr>
<tr>
<td><code>_formKey</code></td>
<td>GlobalKey</td>
<td>è¡¨å–®é©—è­‰éµ</td>
</tr>
<tr>
<td><code>_xxxController</code></td>
<td>TextEditingController</td>
<td>å„æ¬„ä½çš„æ–‡å­—æ§åˆ¶å™¨</td>
</tr>
</tbody>
</table>
<h5 id="_18">æ ¸å¿ƒå‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initState()</code></td>
<td>åˆå§‹åŒ–æ§åˆ¶å™¨ï¼Œè¼‰å…¥ç”¢å“è³‡æ–™</td>
</tr>
<tr>
<td><code>dispose()</code></td>
<td>é‡‹æ”¾æ§åˆ¶å™¨è³‡æº</td>
</tr>
<tr>
<td><code>_saveChanges()</code></td>
<td>å„²å­˜ç”¢å“ä¿®æ”¹ï¼ŒåŒ…å«è¡¨å–®é©—è­‰</td>
</tr>
<tr>
<td><code>_deleteSupplement()</code></td>
<td>åˆªé™¤ç”¢å“ï¼ˆå«ç¢ºèªå°è©±æ¡†ï¼‰</td>
</tr>
<tr>
<td><code>_pickImage()</code></td>
<td>é¸æ“‡åœ–ç‰‡ï¼ˆå¾ç›¸ç°¿ï¼‰</td>
</tr>
<tr>
<td><code>_copyImageToPermanentStorage()</code></td>
<td>å°‡åœ–ç‰‡è¤‡è£½åˆ°æ°¸ä¹…å„²å­˜</td>
</tr>
<tr>
<td><code>_buildViewMode()</code></td>
<td>æ§‹å»ºæŸ¥çœ‹æ¨¡å¼ UI</td>
</tr>
<tr>
<td><code>_buildEditMode()</code></td>
<td>æ§‹å»ºç·¨è¼¯æ¨¡å¼ UI</td>
</tr>
<tr>
<td><code>_buildInfoCard()</code></td>
<td>æ§‹å»ºè³‡è¨Šå¡ç‰‡</td>
</tr>
<tr>
<td><code>_buildImage()</code></td>
<td>æ§‹å»ºç”¢å“åœ–ç‰‡ï¼ˆå„ªå…ˆæœ¬åœ°ï¼‰</td>
</tr>
<tr>
<td><code>_getStatusColor()</code></td>
<td>æ ¹æ“šç‹€æ…‹å–å¾—é¡è‰²</td>
</tr>
</tbody>
</table>
<h5 id="_19">åŠŸèƒ½ç‰¹è‰²</h5>
<ul>
<li>æŸ¥çœ‹/ç·¨è¼¯æ¨¡å¼åˆ‡æ›</li>
<li>å³æ™‚åº«å­˜é ä¼°é¡¯ç¤º</li>
<li>åœ–ç‰‡é¸æ“‡èˆ‡é è¦½</li>
<li>è¡¨å–®é©—è­‰</li>
<li>åˆªé™¤ç¢ºèªæ©Ÿåˆ¶</li>
</ul>
<hr />
<h4 id="shopping_list_pagedart-">ğŸ›’ <code>shopping_list_page.dart</code> - æ™ºæ…§æ¡è³¼æ¸…å–®</h4>
<h5 id="_20">åŠŸèƒ½æ¦‚è¿°</h5>
<p>æ ¹æ“šè¨­å®šçš„æ¡è³¼é€±æœŸï¼Œæ™ºæ…§è¨ˆç®—æ‰€æœ‰ç”¢å“çš„æ¡è³¼éœ€æ±‚ï¼Œæ”¯æ´æ‰¹æ¬¡æ¡è³¼å®Œæˆã€‚</p>
<h5 id="_21">æ ¸å¿ƒé¡åˆ¥</h5>
<table>
<thead>
<tr>
<th>é¡åˆ¥</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ShoppingListPage</code></td>
<td>æ¡è³¼æ¸…å–®ä¸»é </td>
</tr>
<tr>
<td><code>_ShoppingListPageState</code></td>
<td>ç‹€æ…‹ç®¡ç†</td>
</tr>
<tr>
<td><code>_PurchaseItemCard</code></td>
<td>æ¡è³¼é …ç›®å¡ç‰‡</td>
</tr>
</tbody>
</table>
<h5 id="_22">ä¸»è¦å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initState()</code></td>
<td>åˆå§‹åŒ–é€±æœŸå¤©æ•¸æ§åˆ¶å™¨</td>
</tr>
<tr>
<td><code>_completeAllPurchases()</code></td>
<td>å®Œæˆæ‰€æœ‰æ¡è³¼ï¼ˆå«ç¢ºèªï¼‰</td>
</tr>
<tr>
<td><code>_buildSettingsSection()</code></td>
<td>æ§‹å»ºæ¡è³¼é€±æœŸè¨­å®šå€</td>
</tr>
<tr>
<td><code>_buildSummarySection()</code></td>
<td>æ§‹å»ºæ¡è³¼æ‘˜è¦å€</td>
</tr>
<tr>
<td><code>_buildPurchaseList()</code></td>
<td>æ§‹å»ºæ¡è³¼æ¸…å–®</td>
</tr>
<tr>
<td><code>_buildBottomButton()</code></td>
<td>æ§‹å»ºåº•éƒ¨æŒ‰éˆ•</td>
</tr>
<tr>
<td><code>_buildImage()</code></td>
<td>æ§‹å»ºç”¢å“åœ–ç‰‡</td>
</tr>
</tbody>
</table>
<h5 id="ui_1">UI çµæ§‹</h5>
<ol>
<li><strong>è¨­å®šå€</strong>ï¼šæ¡è³¼é€±æœŸè¼¸å…¥ï¼ˆé è¨­ 30 å¤©ï¼‰</li>
<li><strong>æ‘˜è¦å€</strong>ï¼šé¡¯ç¤ºç¸½å…±éœ€è³¼è²·çš„ç”¢å“æ•¸å’Œç“¶æ•¸</li>
<li><strong>éœ€è¦æ¡è³¼å€</strong>ï¼šåˆ—å‡ºæ‰€æœ‰éœ€è¦è³¼è²·çš„ç”¢å“</li>
<li><strong>æš«ç„¡éœ€è³¼è²·å€</strong>ï¼šå¯æ‘ºç–Šçš„åº«å­˜å……è¶³åˆ—è¡¨</li>
<li><strong>åº•éƒ¨æŒ‰éˆ•</strong>ï¼šä¸€éµå®Œæˆæ‰€æœ‰æ¡è³¼</li>
</ol>
<hr />
<h4 id="smart_add_pagedart-">â• <code>smart_add_page.dart</code> - æ™ºæ…§æ–°å¢é é¢</h4>
<h5 id="_23">åŠŸèƒ½æ¦‚è¿°</h5>
<p>æ–°å¢ä¿å¥é£Ÿå“ï¼Œæ”¯æ´æ¢ç¢¼æƒæã€æ‰‹å‹•è¼¸å…¥ã€åœ–ç‰‡ä¸Šå‚³ç­‰åŠŸèƒ½ã€‚</p>
<h5 id="_24">ç‹€æ…‹ç®¡ç†</h5>
<table>
<thead>
<tr>
<th>ç‹€æ…‹è®Šæ•¸</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_formKey</code></td>
<td>GlobalKey</td>
<td>è¡¨å–®é©—è­‰éµ</td>
</tr>
<tr>
<td><code>_xxxController</code></td>
<td>TextEditingController</td>
<td>å„æ¬„ä½æ§åˆ¶å™¨</td>
</tr>
<tr>
<td><code>_showScanner</code></td>
<td>bool</td>
<td>æ˜¯å¦é¡¯ç¤ºæƒæå™¨</td>
</tr>
<tr>
<td><code>_selectedImagePath</code></td>
<td>String?</td>
<td>é¸æ“‡çš„åœ–ç‰‡è·¯å¾‘</td>
</tr>
</tbody>
</table>
<h5 id="_25">æ ¸å¿ƒå‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>dispose()</code></td>
<td>é‡‹æ”¾æ‰€æœ‰æ§åˆ¶å™¨è³‡æº</td>
</tr>
<tr>
<td><code>_pickImage()</code></td>
<td>é¸æ“‡ç”¢å“åœ–ç‰‡</td>
</tr>
<tr>
<td><code>_copyImageToPermanentStorage()</code></td>
<td>è¤‡è£½åœ–ç‰‡åˆ°æ°¸ä¹…å„²å­˜</td>
</tr>
<tr>
<td><code>_saveSupplement()</code></td>
<td>å„²å­˜æ–°ç”¢å“åˆ°è³‡æ–™åº«</td>
</tr>
<tr>
<td><code>_buildScanner()</code></td>
<td>æ§‹å»ºæ¢ç¢¼æƒæå™¨ UI</td>
</tr>
<tr>
<td><code>_buildForm()</code></td>
<td>æ§‹å»ºè¼¸å…¥è¡¨å–® UI</td>
</tr>
</tbody>
</table>
<h5 id="_26">è¡¨å–®å€å¡Š</h5>
<ol>
<li><strong>æ¢ç¢¼æƒæå€</strong></li>
<li>æ‰‹å‹•è¼¸å…¥æ¢ç¢¼</li>
<li>
<p>æƒæå™¨æŒ‰éˆ•</p>
</li>
<li>
<p><strong>åŸºæœ¬è³‡è¨Šå€</strong></p>
</li>
<li>ç”¢å“åç¨±ï¼ˆå¿…å¡«ï¼‰</li>
<li>å“ç‰Œï¼ˆå¿…å¡«ï¼‰</li>
<li>ç”¢å“åœ–ç‰‡é¸æ“‡</li>
<li>
<p>åœ–ç‰‡ç¶²å€ï¼ˆé¸å¡«ï¼‰</p>
</li>
<li>
<p><strong>åº«å­˜è¨­å®šå€</strong></p>
</li>
<li>å–®ç“¶æ•¸é‡ï¼ˆé è¨­ 60ï¼‰</li>
<li>æ¯æ—¥åŠ‘é‡ï¼ˆé è¨­ 2ï¼‰</li>
<li>ç›®å‰åº«å­˜ï¼ˆé è¨­ 0ï¼‰</li>
<li>å‚™è²¨å¤©æ•¸ï¼ˆé è¨­ 3ï¼‰</li>
</ol>
<hr />
<h3 id="4-providers">4ï¸âƒ£ ç‹€æ…‹ç®¡ç†å±¤ï¼ˆproviders/ï¼‰</h3>
<h4 id="supplement_providerdart-">ğŸ”„ <code>supplement_provider.dart</code> - ä¿å¥é£Ÿå“ç‹€æ…‹ç®¡ç†</h4>
<h5 id="_27">åŠŸèƒ½æ¦‚è¿°</h5>
<p>ç®¡ç†æ‰€æœ‰ä¿å¥é£Ÿå“çš„è³‡æ–™å­˜å–ã€CRUD æ“ä½œã€æ’åºåŠŸèƒ½ã€‚</p>
<h5 id="_28">æ ¸å¿ƒè®Šæ•¸</h5>
<table>
<thead>
<tr>
<th>è®Šæ•¸</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_box</code></td>
<td>Box<Supplement>?</td>
<td>Hive è³‡æ–™åº«ç›’å­</td>
</tr>
<tr>
<td><code>_supplements</code></td>
<td>List<Supplement></td>
<td>ä¿å¥é£Ÿå“åˆ—è¡¨</td>
</tr>
<tr>
<td><code>_currentSortOption</code></td>
<td>SortOption</td>
<td>ç›®å‰æ’åºé¸é …</td>
</tr>
</tbody>
</table>
<h5 id="_29">ä¸»è¦å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initialize()</code></td>
<td>åˆå§‹åŒ– Hive è³‡æ–™åº«</td>
</tr>
<tr>
<td><code>loadSupplements()</code></td>
<td>å¾è³‡æ–™åº«è¼‰å…¥æ‰€æœ‰ç”¢å“</td>
</tr>
<tr>
<td><code>addSupplement(supplement)</code></td>
<td>æ–°å¢ç”¢å“</td>
</tr>
<tr>
<td><code>updateSupplement(supplement)</code></td>
<td>æ›´æ–°ç”¢å“</td>
</tr>
<tr>
<td><code>deleteSupplement(id)</code></td>
<td>åˆªé™¤ç”¢å“</td>
</tr>
<tr>
<td><code>getSupplementById(id)</code></td>
<td>æ ¹æ“š ID å–å¾—ç”¢å“</td>
</tr>
<tr>
<td><code>quickRestock(id)</code></td>
<td>å¿«é€Ÿè£œè²¨</td>
</tr>
<tr>
<td><code>adjustStock(id, newStock)</code></td>
<td>èª¿æ•´åº«å­˜</td>
</tr>
<tr>
<td><code>setSortOption(option)</code></td>
<td>è¨­å®šæ’åºæ–¹å¼</td>
</tr>
</tbody>
</table>
<h5 id="getter">Getter å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>Getter</th>
<th>å›å‚³å€¼</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>supplements</code></td>
<td>List<Supplement></td>
<td>å–å¾—æ’åºå¾Œçš„ç”¢å“åˆ—è¡¨</td>
</tr>
<tr>
<td><code>supplementsNeedingReorder</code></td>
<td>List<Supplement></td>
<td>éœ€è¦è£œè²¨çš„ç”¢å“</td>
</tr>
<tr>
<td><code>supplementsAtRisk</code></td>
<td>List<Supplement></td>
<td>æ–·è²¨é¢¨éšªçš„ç”¢å“</td>
</tr>
<tr>
<td><code>supplementsSortedByRemainingDays</code></td>
<td>List<Supplement></td>
<td>ä¾å‰©é¤˜å¤©æ•¸æ’åº</td>
</tr>
<tr>
<td><code>supplementsSortedByStatus</code></td>
<td>List<Supplement></td>
<td>ä¾ç‹€æ…‹æ’åº</td>
</tr>
</tbody>
</table>
<h5 id="_30">æ’åºé¸é …</h5>
<ul>
<li><code>SortOption.name</code>ï¼šä¾åç¨±æ’åº</li>
<li><code>SortOption.remainingDays</code>ï¼šä¾å‰©é¤˜å¤©æ•¸æ’åº</li>
</ul>
<hr />
<h4 id="shopping_list_providerdart-">ğŸ›ï¸ <code>shopping_list_provider.dart</code> - æ¡è³¼æ¸…å–®ç‹€æ…‹ç®¡ç†</h4>
<h5 id="_31">åŠŸèƒ½æ¦‚è¿°</h5>
<p>è¨ˆç®—æ¡è³¼éœ€æ±‚ã€ç®¡ç†æ¡è³¼é€±æœŸã€è™•ç†æ‰¹æ¬¡æ¡è³¼é‚è¼¯ã€‚</p>
<h5 id="_32">æ ¸å¿ƒé¡åˆ¥</h5>
<table>
<thead>
<tr>
<th>é¡åˆ¥</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PurchaseItem</code></td>
<td>æ¡è³¼é …ç›®ï¼ˆåŒ…å«ç”¢å“å’Œè³¼è²·ç“¶æ•¸ï¼‰</td>
</tr>
<tr>
<td><code>ShoppingListProvider</code></td>
<td>æ¡è³¼æ¸…å–®ç‹€æ…‹ç®¡ç†</td>
</tr>
</tbody>
</table>
<h5 id="_33">æ ¸å¿ƒè®Šæ•¸</h5>
<table>
<thead>
<tr>
<th>è®Šæ•¸</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>supplementProvider</code></td>
<td>SupplementProvider</td>
<td>ä¿å¥é£Ÿå“ Provider</td>
</tr>
<tr>
<td><code>_targetCycleDays</code></td>
<td>int</td>
<td>æ¡è³¼é€±æœŸå¤©æ•¸ï¼ˆé è¨­ 30ï¼‰</td>
</tr>
</tbody>
</table>
<h5 id="_34">ä¸»è¦å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>setTargetCycleDays(days)</code></td>
<td>è¨­å®šæ¡è³¼é€±æœŸ</td>
</tr>
<tr>
<td><code>calculatePurchaseList()</code></td>
<td>è¨ˆç®—æ‰€æœ‰ç”¢å“çš„æ¡è³¼æ¸…å–®</td>
</tr>
<tr>
<td><code>completeAllPurchases()</code></td>
<td>å®Œæˆæ‰€æœ‰æ¡è³¼ï¼Œæ›´æ–°åº«å­˜</td>
</tr>
<tr>
<td><code>completeSinglePurchase(id)</code></td>
<td>å®Œæˆå–®ä¸€ç”¢å“æ¡è³¼</td>
</tr>
<tr>
<td><code>getPurchaseSummary()</code></td>
<td>å–å¾—æ¡è³¼æ‘˜è¦æ–‡å­—</td>
</tr>
<tr>
<td><code>calculateEstimatedStockAfterPurchase()</code></td>
<td>è¨ˆç®—æ¡è³¼å¾Œé ä¼°åº«å­˜</td>
</tr>
<tr>
<td><code>calculateRemainingDaysAfterPurchase()</code></td>
<td>è¨ˆç®—æ¡è³¼å¾Œå‰©é¤˜å¤©æ•¸</td>
</tr>
</tbody>
</table>
<h5 id="getter_1">Getter å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>Getter</th>
<th>å›å‚³å€¼</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>itemsNeedingPurchase</code></td>
<td>List<PurchaseItem></td>
<td>éœ€è¦è³¼è²·çš„é …ç›®</td>
</tr>
<tr>
<td><code>itemsNotNeedingPurchase</code></td>
<td>List<PurchaseItem></td>
<td>ä¸éœ€è³¼è²·çš„é …ç›®</td>
</tr>
<tr>
<td><code>totalBottlesToBuy</code></td>
<td>int</td>
<td>ç¸½å…±éœ€è³¼è²·ç“¶æ•¸</td>
</tr>
<tr>
<td><code>totalProductsCount</code></td>
<td>int</td>
<td>éœ€è³¼è²·ç”¢å“ç¨®é¡æ•¸</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="5-services">5ï¸âƒ£ æœå‹™å±¤ï¼ˆservices/ï¼‰</h3>
<h4 id="notification_servicedart-">ğŸ”” <code>notification_service.dart</code> - é€šçŸ¥æœå‹™</h4>
<h5 id="_35">åŠŸèƒ½æ¦‚è¿°</h5>
<p>ç®¡ç†æœ¬åœ°é€šçŸ¥çš„åˆå§‹åŒ–ã€æ’ç¨‹ã€ç™¼é€ï¼Œæ”¯æ´æ¯æ—¥å’Œæ¯æœˆå®šæ™‚æé†’ã€‚</p>
<h5 id="_36">è¨­è¨ˆæ¨¡å¼</h5>
<p>å–®ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰</p>
<h5 id="_37">æ ¸å¿ƒè®Šæ•¸</h5>
<table>
<thead>
<tr>
<th>è®Šæ•¸</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_instance</code></td>
<td>NotificationService</td>
<td>å–®ä¾‹å¯¦ä¾‹</td>
</tr>
<tr>
<td><code>_notifications</code></td>
<td>FlutterLocalNotificationsPlugin</td>
<td>é€šçŸ¥æ’ä»¶</td>
</tr>
<tr>
<td><code>_initialized</code></td>
<td>bool</td>
<td>æ˜¯å¦å·²åˆå§‹åŒ–</td>
</tr>
</tbody>
</table>
<h5 id="_38">ä¸»è¦å‡½æ•¸</h5>
<table>
<thead>
<tr>
<th>å‡½æ•¸</th>
<th>åŠŸèƒ½èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>initialize()</code></td>
<td>åˆå§‹åŒ–é€šçŸ¥æœå‹™ï¼ˆAndroid/iOSï¼‰</td>
</tr>
<tr>
<td><code>requestPermissions()</code></td>
<td>è«‹æ±‚é€šçŸ¥æ¬Šé™ï¼ˆiOSï¼‰</td>
</tr>
<tr>
<td><code>showNotification(id, title, body)</code></td>
<td>ç™¼é€å³æ™‚é€šçŸ¥</td>
</tr>
<tr>
<td><code>scheduleDailyReorderCheck(supplements)</code></td>
<td>æ’ç¨‹æ¯æ—¥è£œè²¨æª¢æŸ¥ï¼ˆ9:00ï¼‰</td>
</tr>
<tr>
<td><code>scheduleMonthlyShoppingListReminder()</code></td>
<td>æ’ç¨‹æ¯æœˆæ¡è³¼æé†’ï¼ˆ1è™Ÿ 10:00ï¼‰</td>
</tr>
<tr>
<td><code>showReorderNotification(supplement)</code></td>
<td>ç™¼é€å–®ä¸€ç”¢å“è£œè²¨æé†’</td>
</tr>
<tr>
<td><code>cancelAllNotifications()</code></td>
<td>å–æ¶ˆæ‰€æœ‰é€šçŸ¥</td>
</tr>
<tr>
<td><code>_nextInstanceOfTime(hour, minute)</code></td>
<td>è¨ˆç®—ä¸‹ä¸€æ¬¡æŒ‡å®šæ™‚é–“</td>
</tr>
<tr>
<td><code>_nextInstanceOfMonthlyTime(day, hour, minute)</code></td>
<td>è¨ˆç®—ä¸‹ä¸€æ¬¡æ¯æœˆæ™‚é–“</td>
</tr>
</tbody>
</table>
<h5 id="_39">é€šçŸ¥é »é“</h5>
<table>
<thead>
<tr>
<th>é »é“ ID</th>
<th>åç¨±</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>smart_supplement_channel</code></td>
<td>æ™ºæ…§è—¥å“åº«å­˜ç®¡ç† é€šçŸ¥</td>
<td>ä¸€èˆ¬é€šçŸ¥</td>
</tr>
<tr>
<td><code>daily_reorder_channel</code></td>
<td>æ¯æ—¥è£œè²¨æé†’</td>
<td>æ¯æ—¥ 9:00 æª¢æŸ¥</td>
</tr>
<tr>
<td><code>monthly_shopping_channel</code></td>
<td>æ¯æœˆæ¡è³¼æé†’</td>
<td>æ¯æœˆ 1 è™Ÿ 10:00</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_40">ğŸ”„ è³‡æ–™æµå‘åœ–</h2>
<pre><div class="mermaid">sequenceDiagram
    participant U as ç”¨æˆ¶
    participant V as View (Pages)
    participant P as Provider
    participant M as Model
    participant D as Hive DB
    participant N as Notification

    U-&gt;&gt;V: æ“ä½œ UI
    V-&gt;&gt;P: èª¿ç”¨ Provider æ–¹æ³•
    P-&gt;&gt;M: æ›´æ–° Model è³‡æ–™
    P-&gt;&gt;D: æŒä¹…åŒ–åˆ°è³‡æ–™åº«
    D--&gt;&gt;P: ç¢ºèªå„²å­˜
    P-&gt;&gt;P: notifyListeners()
    P--&gt;&gt;V: æ›´æ–° UI
    V--&gt;&gt;U: é¡¯ç¤ºçµæœ

    Note over P,N: ç‰¹å®šæ“ä½œè§¸ç™¼é€šçŸ¥
    P-&gt;&gt;N: æ’ç¨‹é€šçŸ¥
    N--&gt;&gt;U: å®šæ™‚æé†’
</div></pre>
<hr />
<h2 id="_41">ğŸ“Š é—œéµæ¥­å‹™æµç¨‹</h2>
<h3 id="_42">æ–°å¢ä¿å¥é£Ÿå“æµç¨‹</h3>
<pre><div class="mermaid">flowchart TD
    Start([ç”¨æˆ¶é»æ“Šæ–°å¢]) --&gt; Input[å¡«å¯«ç”¢å“è³‡è¨Š]
    Input --&gt; Scan{æƒææ¢ç¢¼?}
    Scan --&gt;|æ˜¯| Scanner[å•Ÿå‹•æƒæå™¨]
    Scan --&gt;|å¦| Form[æ‰‹å‹•è¼¸å…¥]
    Scanner --&gt; Form
    Form --&gt; Upload{ä¸Šå‚³åœ–ç‰‡?}
    Upload --&gt;|æ˜¯| PickImg[é¸æ“‡åœ–ç‰‡]
    Upload --&gt;|å¦| Validate
    PickImg --&gt; CopyImg[è¤‡è£½åˆ°æ°¸ä¹…å„²å­˜]
    CopyImg --&gt; Validate[è¡¨å–®é©—è­‰]
    Validate --&gt; Create[å‰µå»º Supplement ç‰©ä»¶]
    Create --&gt; Save[å„²å­˜åˆ° Hive]
    Save --&gt; Notify[æ›´æ–° UI]
    Notify --&gt; End([è¿”å›å„€è¡¨æ¿])
</div></pre>
<h3 id="_43">æ™ºæ…§æ¡è³¼æµç¨‹</h3>
<pre><div class="mermaid">flowchart TD
    Start([ç”¨æˆ¶é€²å…¥æ¡è³¼æ¸…å–®]) --&gt; SetCycle[è¨­å®šæ¡è³¼é€±æœŸ]
    SetCycle --&gt; CalcAll[è¨ˆç®—æ‰€æœ‰ç”¢å“éœ€æ±‚]
    CalcAll --&gt; Filter{ç¯©é¸}
    Filter --&gt;|éœ€è³¼è²·| NeedList[é¡¯ç¤ºéœ€è³¼è²·æ¸…å–®]
    Filter --&gt;|åº«å­˜å……è¶³| NoNeedList[é¡¯ç¤ºå……è¶³æ¸…å–®]
    NeedList --&gt; ShowSummary[é¡¯ç¤ºç¸½çµ]
    NoNeedList --&gt; ShowSummary
    ShowSummary --&gt; UserAction{ç”¨æˆ¶æ“ä½œ}
    UserAction --&gt;|èª¿æ•´é€±æœŸ| SetCycle
    UserAction --&gt;|å®Œæˆæ¡è³¼| Confirm[ç¢ºèªå°è©±æ¡†]
    Confirm --&gt;|ç¢ºèª| UpdateAll[æ‰¹æ¬¡æ›´æ–°æ‰€æœ‰åº«å­˜]
    Confirm --&gt;|å–æ¶ˆ| ShowSummary
    UpdateAll --&gt; ResetTime[é‡ç½®æ›´æ–°æ™‚é–“]
    ResetTime --&gt; Success([æ¡è³¼å®Œæˆ])
</div></pre>
<hr />
<h2 id="_44">ğŸ¯ æ ¸å¿ƒæŠ€è¡“ç‰¹é»</h2>
<h3 id="1">1. å‹•æ…‹åº«å­˜ç®¡ç†</h3>
<ul>
<li>åŸºæ–¼æ™‚é–“çš„è‡ªå‹•åº«å­˜æ‰£æ¸›</li>
<li>ä¸éœ€æ‰‹å‹•è¨˜éŒ„æ¯æ¬¡æœç”¨</li>
<li>æ™ºæ…§é ä¼°ç›®å‰åº«å­˜é‡</li>
</ul>
<h3 id="2">2. æ™ºæ…§è£œè²¨ç³»çµ±</h3>
<ul>
<li>è€ƒæ…®å‚™è²¨æ™‚é–“çš„å®‰å…¨åº«å­˜</li>
<li>æ‰¹æ¬¡æ¡è³¼å„ªåŒ–</li>
<li>å¤šéšæ®µç‹€æ…‹æé†’ï¼ˆå……è¶³/å»ºè­°/é¢¨éšªï¼‰</li>
</ul>
<h3 id="3">3. æœ¬åœ°è³‡æ–™æŒä¹…åŒ–</h3>
<ul>
<li>ä½¿ç”¨ Hive NoSQL è³‡æ–™åº«</li>
<li>è¼•é‡ç´šã€é«˜æ•ˆèƒ½</li>
<li>æ”¯æ´è‡ªè¨‚ç‰©ä»¶åºåˆ—åŒ–</li>
</ul>
<h3 id="4">4. ç‹€æ…‹ç®¡ç†</h3>
<ul>
<li>Provider æ¨¡å¼</li>
<li>éŸ¿æ‡‰å¼æ›´æ–°</li>
<li>ä¾è³´æ³¨å…¥</li>
</ul>
<h3 id="5">5. é€šçŸ¥ç³»çµ±</h3>
<ul>
<li>æœ¬åœ°æ’ç¨‹é€šçŸ¥</li>
<li>æ¯æ—¥è‡ªå‹•æª¢æŸ¥</li>
<li>æ¯æœˆæ¡è³¼æé†’</li>
</ul>
<hr />
<h2 id="_45">ğŸ“± æ”¯æ´å¹³å°</h2>
<table>
<thead>
<tr>
<th>å¹³å°</th>
<th>æ”¯æ´ç‹€æ…‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Android</td>
<td>âœ… å®Œæ•´æ”¯æ´</td>
<td>ä¸»è¦é–‹ç™¼å¹³å°</td>
</tr>
<tr>
<td>iOS</td>
<td>âœ… å®Œæ•´æ”¯æ´</td>
<td>éœ€ macOS é–‹ç™¼ç’°å¢ƒ</td>
</tr>
<tr>
<td>Windows</td>
<td>âš ï¸ éƒ¨åˆ†æ”¯æ´</td>
<td>æ¡Œé¢ç‰ˆï¼ŒåŠŸèƒ½å®Œæ•´</td>
</tr>
<tr>
<td>Web</td>
<td>âš ï¸ éƒ¨åˆ†æ”¯æ´</td>
<td>æŸäº›åŠŸèƒ½å—é™</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_46">ğŸ“š ä¾è³´å¥—ä»¶</h2>
<h3 id="_47">æ ¸å¿ƒä¾è³´</h3>
<table>
<thead>
<tr>
<th>å¥—ä»¶</th>
<th>ç‰ˆæœ¬</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>provider</code></td>
<td>^6.1.1</td>
<td>ç‹€æ…‹ç®¡ç†</td>
</tr>
<tr>
<td><code>hive</code></td>
<td>^2.2.3</td>
<td>æœ¬åœ° NoSQL è³‡æ–™åº«</td>
</tr>
<tr>
<td><code>hive_flutter</code></td>
<td>^1.1.0</td>
<td>Hive Flutter æ”¯æ´</td>
</tr>
<tr>
<td><code>mobile_scanner</code></td>
<td>^3.5.5</td>
<td>æ¢ç¢¼æƒæ</td>
</tr>
<tr>
<td><code>cached_network_image</code></td>
<td>^3.3.1</td>
<td>ç¶²è·¯åœ–ç‰‡ç·©å­˜</td>
</tr>
<tr>
<td><code>image_picker</code></td>
<td>^1.0.7</td>
<td>åœ–ç‰‡é¸æ“‡å™¨</td>
</tr>
<tr>
<td><code>flutter_local_notifications</code></td>
<td>^17.2.2</td>
<td>æœ¬åœ°é€šçŸ¥</td>
</tr>
<tr>
<td><code>uuid</code></td>
<td>^4.3.3</td>
<td>UUID ç”Ÿæˆ</td>
</tr>
<tr>
<td><code>intl</code></td>
<td>^0.18.1</td>
<td>åœ‹éš›åŒ–å’Œæ—¥æœŸæ ¼å¼åŒ–</td>
</tr>
</tbody>
</table>
<h3 id="_48">é–‹ç™¼ä¾è³´</h3>
<table>
<thead>
<tr>
<th>å¥—ä»¶</th>
<th>ç‰ˆæœ¬</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>build_runner</code></td>
<td>^2.4.7</td>
<td>ç¨‹å¼ç¢¼ç”Ÿæˆ</td>
</tr>
<tr>
<td><code>hive_generator</code></td>
<td>^2.0.1</td>
<td>Hive é©é…å™¨ç”Ÿæˆ</td>
</tr>
<tr>
<td><code>flutter_lints</code></td>
<td>^3.0.1</td>
<td>ç¨‹å¼ç¢¼è¦ç¯„æª¢æŸ¥</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_49">ğŸ” è³‡æ–™åº«çµæ§‹</h2>
<h3 id="hive-box">Hive Box</h3>
<table>
<thead>
<tr>
<th>Box åç¨±</th>
<th>é¡å‹</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>supplements</code></td>
<td>Box<Supplement></td>
<td>å„²å­˜æ‰€æœ‰ä¿å¥é£Ÿå“è³‡æ–™</td>
</tr>
</tbody>
</table>
<h3 id="supplement-schema">Supplement Schema</h3>
<pre><code class="language-dart">@HiveType(typeId: 0)
class Supplement extends HiveObject {
  @HiveField(0) String id;
  @HiveField(1) String? barcode;
  @HiveField(2) String name;
  @HiveField(3) String brand;
  @HiveField(4) String imagePath;
  @HiveField(5) int quantityPerBottle;
  @HiveField(6) int dailyDosage;
  @HiveField(7) int currentStock;
  @HiveField(8) int leadTime;
  @HiveField(9) DateTime lastUpdated;
  @HiveField(10) String? localImagePath;
}
</code></pre>
<hr />
<h2 id="_50">ğŸ’¡ è¨­è¨ˆäº®é»</h2>
<ol>
<li><strong>ç„¡éœ€æ¯æ—¥è¨˜éŒ„</strong>ï¼šåŸºæ–¼æ™‚é–“çš„è‡ªå‹•åº«å­˜è¨ˆç®—</li>
<li><strong>æ™ºæ…§æ¡è³¼å»ºè­°</strong>ï¼šè€ƒæ…®å‚™è²¨æ™‚é–“çš„æ‰¹æ¬¡æ¡è³¼å„ªåŒ–</li>
<li><strong>å¤šå±¤ç´šç‹€æ…‹æé†’</strong>ï¼šå……è¶³ğŸŸ¢ â†’ å»ºè­°ğŸŸ  â†’ é¢¨éšªğŸ”´</li>
<li><strong>é›¢ç·šå„ªå…ˆ</strong>ï¼šæ‰€æœ‰è³‡æ–™å„²å­˜åœ¨æœ¬åœ°ï¼Œç„¡éœ€ç¶²è·¯</li>
<li><strong>è‡ªå‹•åŒ–æé†’</strong>ï¼šå®šæ™‚æª¢æŸ¥ä¸¦æ¨é€é€šçŸ¥</li>
<li><strong>éˆæ´»çš„æ¡è³¼é€±æœŸ</strong>ï¼šå¯è‡ªè¨‚å¤©æ•¸è¨ˆç®—éœ€æ±‚</li>
</ol>
<hr />
<h2 id="uiux">ğŸ¨ UI/UX è¨­è¨ˆåŸå‰‡</h2>
<ul>
<li><strong>Material Design 3</strong>ï¼šéµå¾ªæœ€æ–°è¨­è¨ˆè¦ç¯„</li>
<li><strong>ç°¡æ½”ç›´è§€</strong>ï¼šä¸€ç›®äº†ç„¶çš„ç‹€æ…‹æŒ‡ç¤º</li>
<li><strong>å¿«é€Ÿæ“ä½œ</strong>ï¼šå¿«é€Ÿè£œè²¨ã€æ‰¹æ¬¡æ¡è³¼</li>
<li><strong>è¦–è¦ºåé¥‹</strong>ï¼šé¡è‰²ç·¨ç¢¼ç‹€æ…‹ï¼Œè¡¨æƒ…ç¬¦è™Ÿè¼”åŠ©</li>
<li><strong>éŸ¿æ‡‰å¼è¨­è¨ˆ</strong>ï¼šè‡ªé©æ‡‰ä¸åŒè¢å¹•å°ºå¯¸</li>
</ul>
<hr />
<h2 id="_51">ğŸ“Œ ç‰ˆæœ¬è³‡è¨Š</h2>
<ul>
<li><strong>ç•¶å‰ç‰ˆæœ¬</strong>ï¼šv1.1.0+2</li>
<li><strong>æœ€ä½ SDK è¦æ±‚</strong>ï¼šDart 3.0.0</li>
<li><strong>ç›®æ¨™å¹³å°</strong>ï¼šAndroidï¼ˆä¸»è¦ï¼‰ã€iOSã€Windows</li>
</ul>
<hr />
<p><em>æ–‡æª”æœ€å¾Œæ›´æ–°ï¼š2025-11-24</em></p>
        </div>
    </div>
    
    <a href="#" id="back-to-top">â†‘ å›é ‚éƒ¨</a>
</body>
</html>